
<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>ジャンル選択ビューア</title>
</head>
<body>
  <h1>ジャンル選択ビューア</h1>
  <div id="genreSelects"></div>
  <div id="result"></div>

  <script type="module">
    import genreMap from './genre_map.final.js';
    import genreTree from './genre_tree_merged.json' assert { type: "json" };

    function renderSelectUI(tree, container) {
      container.innerHTML = '';
      const select = document.createElement('select');
      const defaultOption = document.createElement('option');
      defaultOption.text = 'ジャンルを選択';
      defaultOption.disabled = true;
      defaultOption.selected = true;
      select.appendChild(defaultOption);

      Object.keys(tree).forEach(key => {
        const option = document.createElement('option');
        option.value = key;
        option.text = key;
        select.appendChild(option);
      });

      select.addEventListener('change', () => {
        const selected = select.value;
        const resultDiv = document.getElementById('result');
        const mapped = genreMap[selected] || '(未定義)';
        resultDiv.textContent = `選択ジャンル: ${selected} → 英語ファイル名: ${mapped}`;
      });

      container.appendChild(select);
    }

    document.addEventListener('DOMContentLoaded', () => {
      const container = document.getElementById('genreSelects');
      renderSelectUI(genreTree, container);
    });
  </script>
</body>
</html>
